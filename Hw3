#include <iostream>
#include <sstream>
using namespace std;

void ShowMenu();
void getRational (int&, int&);
void add ();
void subtract ();
void displayRational (int&, int&);
void reduce (int&, int&);

int main(){
    char user = '\0';
    while (true){
        ShowMenu();
        cin >> user;
        cin.ignore();
        if (user == 'A'){
            add();
        }
        else if(user == 'S'){
            subtract();
        }
        else{
            cout << "Thank you, exiting program";
            break;
        }
        
    }
    return 0;
}

void ShowMenu(){
    cout << "Program Start" << endl;
    cout << "A. addition" << endl;
    cout << "S. subtraction" << endl;
    cout << "Q. exit" << endl;
    cout << "What do you want?" << endl;
}

void getRational(int& num, int& den){
    bool prime = true;
    string numstr, denstr, str = "4444/8888"; //initializes num/den/str strings
    cout << "Please input a fraction (n/d): "; //asks for fraction input
    getline(cin, str); // gets string input from user
    stringstream stream1(str);
    getline(stream1, numstr, '/'); //gets numerator from string stream
    getline(stream1, denstr, '/'); //gets denominator from string stream
    num = stoi(numstr); //points to num integer
    den = stoi(denstr); //points to den integer
    cout << "numstr " << numstr << endl;
    cout << "denstr " << denstr << endl;
    cout << "num " << num << endl;
    cout << "den " << den << endl;
}

void add(){
    system("cls"); //clears screen
    int num1, num2, den1, den2, anum, aden = 0;
    while(true){
        char user = '\0';
        cout << "Addition of rational numbers" << endl;
        getRational(num1, den1); //gets integer values from num1/den1
        getRational(num2, den2);
//        cout << "The result of "; displayRational(num1, den1); // calls displayResult
//        cout << " + "; displayRational(num2, den2); // calls displayResult
        anum = (num1 * den2) + (num2 * den1); //must include definition for anum/aden here
        aden = (den1 * den2); 
        cout << "fraction is: " << anum << "/" << aden << endl; // need to call reduce functions
        cout << endl; cout << "Do you want to do more additions? (Y/N): "; //asks user for more additions
        cin >> user;
        cin.ignore();
        if (user == 'N'){ //if no, stops program
            break;
        }
    }
}

void subtract(){
    system("cls");
    int num1, num2, den1, den2, snum, sden = 0;
    while(true){
        cout << "Subtraction of rational numbers" << endl;
        getRational(num1, den1); //gets integer values from num1/den1
        getRational(num2, den2);
//        cout << "The result of "; displayRational(num1, den1); // calls displayResult
//        cout << " - "; displayRational(num2, den2); // calls displayResult
        snum = (num1 * den2) - (num2 * den1); //must include definition for snum/sden here
        sden = (den1 * den2); 
//        cout << "is: "; reduce(snum, sden); // calls reduce functions
        cout << "fraction is: " << snum << "/" << sden << endl; // need to call reduce functions
        char user = '\0';
        cout << "Do you want to do more subtractions? (Y/N): "; //asks user for more subtractions
        cin >> user;
        cin.ignore();
        if (user == 'N'){ //if no, stops program
            break;
        }
    }
}

void displayRational(int &num, int &den){
    if (den = num){
        cout << num;
    }
    else{
        cout << num << "/" << den;
    }
}

void reduce(int &num, int &den){
    int rem = num/den; //initialize remainder integer
    int gcf = 0; // greatest common factor
    while (rem != 0){ //euclid's algorithm 
        num = den;
        den = rem;
        rem = num/den;
        if (rem == 0)
        {
            gcf = den;
        }
        num = num/gcf;
        den = den/gcf;
    }
    cout << num << "/" << den;
}
